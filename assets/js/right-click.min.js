function initContextMenu(n){$("#map").contextMenu("destroy");let t={start:{name:"Chỉ đường từ đây"},end:{name:"Chỉ đường tới đây"},reverse:{name:"Vị trí này là gì?"}};n&&(t.clear={name:"Xóa chỉ đường"}),$.contextMenu({selector:"#map",callback:handleContext,items:t})}function handleContext(n,t){"start"==n||"end"==n||"clear"==n?addWayPoint(n):"reverse"==n&&clickMap(MOUSE_EVENT)}function addWayPoint(n){if("clear"==n)geoCoding._direction(),initContextMenu(!1);else{initContextMenu(!0);let t=routingControl.getWaypoints(),{lat:e,lng:o}=MOUSE_EVENT.latlng;reversePlace(e,o,i=>{$("#icon_routing").hasClass("opened")||geoCoding._direction(),t["start"==n?0:1]=L.routing.waypoint([e,o],i.display_name),routingControl.setWaypoints(t);routingControl.route()})}}initContextMenu(!1);