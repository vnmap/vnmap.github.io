L.Control.Attribution.prototype.options.position="bottomleft";var geoCoding=L.Control.geocoder({geocoder:L.Control.Geocoder.nominatim({serviceUrl:"/geocode",suggest:!0})}),setView=getViewbox();setView&&(DEFAULT_HOME=[setView.lat,setView.lon],DEFAULT_ZOOM=setView.z);var bounds=new L.LatLngBounds(new L.LatLng(0,85),new L.LatLng(30,130)),map=L.map("map",{zoomControl:!1,attributionControl:!0,maxBounds:bounds}).setView(DEFAULT_HOME,DEFAULT_ZOOM);map.on("click",clickMap),map.on("contextmenu",o=>{MOUSE_EVENT=o}),map.on("move",moveMap),map.on("load",moveMap);var layers={Streets:L.tileLayer(" https://map.itrithuc.vn/tiles/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://map.itrithuc.vn/">VNMap</a> - Bản đồ số Việt Nam',maxZoom:19})};layers.Streets.addTo(map),geoCoding.addTo(map);var materialOptions={fab:!0,miniFab:!0,rippleEffect:!0,toolTips:!1,color:"primary"},routingControl=L.Routing.control({geocoder:L.Control.Geocoder.nominatim({serviceUrl:"/"}),router:L.Routing.graphHopper(""),position:"topleft",routeWhileDragging:!1,language:"vi"}).addTo(map),LOGO=L.DomUtil.create("div","typo-styles__demo mdl-typography--display-2");L.Control.zoomHome=L.Control.extend({options:{position:"bottomright",zoomInText:'<i class="mdi mdi-plus zoom-font"></i>',zoomInTitle:"",zoomOutText:'<i class="mdi mdi-minus zoom-font"></i>',zoomOutTitle:"",zoomHomeText:'<i class="mdi mdi-crosshairs-gps"></i>',zoomHomeTitle:"",voiceText:'<i class="mdi mdi-voice"></i>',voiceTitle:""},onAdd:function(o){var t="gin-control-zoom",e=L.DomUtil.create("div",""),i=L.DomUtil.create("div",t+" leaflet-bar",e),n=L.DomUtil.create("div",t+" leaflet-bar",e),a=L.DomUtil.create("div",t+" leaflet-bar",e),l=this.options;this._zoomHomeButton=this._createButton(l.zoomHomeText,l.zoomHomeTitle,t+"-home",i,this._zoomHome),this._zoomHomeButton.id="zoomHomeButton";var m=L.DomUtil.create("div","mdl-tooltip mdl-tooltip--left",i);m.innerHTML="Hiển thị vị trí của bạn",m.setAttribute("data-mdl-for","zoomHomeButton"),this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomInButton.id="zoomInButton",this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,t+"-out",n,this._zoomOut),this._zoomOutButton.id="zoomOutButton";var r=L.DomUtil.create("div","mdl-tooltip mdl-tooltip--left",i);r.innerHTML="Thu phóng",r.setAttribute("data-mdl-for","zoomInButton");var c=L.DomUtil.create("div","mdl-tooltip mdl-tooltip--left",i);c.innerHTML="Thu phóng",c.setAttribute("data-mdl-for","zoomOutButton"),this._voiceButton=this._createButton(l.voiceText,l.voiceTitle,"voice-active",a,toggleVoice),this._voiceButton.id="voiceButton";var s=L.DomUtil.create("div","mdl-tooltip mdl-tooltip--left",a);return s.innerHTML="Hỗ trợ đọc",s.setAttribute("data-mdl-for","voiceButton"),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),e},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(o){this._map.zoomIn(o.shiftKey?3:1)},_zoomOut:function(o){this._map.zoomOut(o.shiftKey?3:1)},_zoomHome:function(o){map.locate({setView:!0,maxZoom:18}),map.on("locationfound",function(o){removeCurrentMarker(),getPlacebyClick(o.latlng.lat,o.latlng.lng)}),map.on("locationerror",console.log)},_createButton:function(o,t,e,i,n){var a=L.DomUtil.create("a",e,i);return a.innerHTML=o,a.href="#",a.title=t,L.DomEvent.on(a,"mousedown dblclick",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.stop).on(a,"click",n,this).on(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var o=this._map,t="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,t),L.DomUtil.removeClass(this._zoomOutButton,t),o._zoom===o.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,t),o._zoom===o.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,t)}});var zoomHome=new L.Control.zoomHome;zoomHome.addTo(map);var lc=L.control.logo({position:"topright",link:"#",image:"/assets/images/logo.png",height:"56px",width:"200px"}).addTo(map);map.locate({setView:null==setView,maxZoom:18,timeout:1e4}),map.on("locationfound",function(o){console.log("Đã xác định được vị trí của người dùng")}),map.on("locationerror",function(){console.log("Không xác định được vị trí của người dùng")}),L.DomEvent.addListener(L.DomUtil.get("obfuscator"),"click",toggleLeftmenu),L.DomEvent.addListener(L.DomUtil.get("closeLeftMenu"),"click",toggleLeftmenu),L.DomEvent.addListener(L.DomUtil.get("expand"),"click",toggleExpand),L.DomEvent.addListener(L.DomUtil.get("placeclose"),"click",removeCurrentMarker);var placename=L.DomUtil.get("placename"),placelocation=L.DomUtil.get("placelocation");L.DomEvent.addListener(placename,"click",clickPlaceDetail),L.DomEvent.addListener(placelocation,"click",clickPlaceDetail),$("#direction").on("click",()=>{addWayPoint("start")}),$("#detailclose").on("click",()=>{$("#detail").removeClass("detail-left")});